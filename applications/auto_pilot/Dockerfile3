FROM ubuntu:bionic
RUN apt-get update
RUN apt-get install python3 python3-pip -y
RUN apt-get install libsm6 libxrender1 libfontconfig1 libxext-dev -y
RUN pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple numpy
RUN pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple keras
RUN pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple opencv-contrib-python
RUN pip3 install -i https://pypi.tuna.tsinghua.edu.cn/simple tensorflow

ADD auto_pilot/3_Algo2/app /container/
ADD simplerpc/app /container/

CMD ["python3", "/container/server.py", "3", "11000"]

EXPOSE 11000